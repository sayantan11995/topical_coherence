<!DOCTYPE html>
<html>

<head>
    <!-- Resources -->
    <script src="http://www.amcharts.com/lib/3/amcharts.js" type="text/javascript"></script>
    <script src="http://www.amcharts.com/lib/3/serial.js" type="text/javascript"></script>
</head>

<body>
    <div style="display: flex; justify-content: center; margin: auto;">
        <h1>
           Evolution of Connection Density
        </h1>
    </div>

    <div>
        <h3>Select Year Window</h3>
    </div>
    <form action='/connection_density' method="post" novalidate="novalidate">
        <input type="number" id="yearWindowConnDen" name="yearWindowConnDen" value={{year_range}}>
        <button id="updateChartConnDen" type="submit">Update Chart</button>
    </form>

    <div style="width: 100%; height: 400px; display: flex; float: left;">
        <div id="chartdiv1" style="width: 60%; height: 400px;" ></div>
        <div style="display: flex; width: 35%; justify-content: center; margin: auto;">
            <h3> (Autobiography)</h3>
        </div>
    </div>
    <div style="width: 100%; height: 400px; display: flex; float: left;">
        <div id="chartdiv2" style="width: 60%; height: 400px;" ></div>
        <div style="display: flex; width: 35%; justify-content: center; margin: auto;">
            <h3> (Biography)</h3>
        </div>
    </div>

    <div style="width: 100%; height: 400px; display: flex; float: left;">
        <div id="chartdiv3" style="width: 60%; height: 400px;" ></div>
    </div>
    <!-- <div id="chartdiv2" style="width: 60%; height: 400px; float: left;"></div> -->

    <script>
        AmCharts.ready(function () {

            // LINE CHART
            var chart1 = new AmCharts.AmSerialChart();
            chart1.pathToImages = "http://www.amcharts.com/lib/images";

            chart1.dataProvider = {{ connection_density_data['SOMEWT'] | safe }};
            chart1.marginRight = 0;
            chart1.categoryField = "date";

            var categoryAxis = chart1.categoryAxis;
            // categoryAxis.parseDates = true;
            categoryAxis.dashLength = 5;
            categoryAxis.equalSpacing = true;
            categoryAxis.startOnAxis = false;
            categoryAxis.axisAlpha = 0;
            categoryAxis.autoGridCount = false;
            categoryAxis.gridCount = 8;
            categoryAxis.showFirstLabel = true;

            var valueAxis1 = new AmCharts.ValueAxis();
            valueAxis1.axisAlpha = 0;
            valueAxis1.dashLength = 5;
            valueAxis1.inside = true;
            chart1.addValueAxis(valueAxis1);

            var valueAxis2 = new AmCharts.ValueAxis();
            valueAxis2.axisAlpha = 0;
            valueAxis2.dashLength = 5;
            valueAxis2.inside = true;
            valueAxis2.position = "right";
            chart1.addValueAxis(valueAxis2);

            var graph1 = new AmCharts.AmGraph();
            graph1.bullet = "round";
            graph1.bulletSize = 10;
            graph1.valueField = "nodes";
            chart1.addGraph(graph1);

            var graph2 = new AmCharts.AmGraph();
            graph2.type = "column";
            graph2.valueAxis = valueAxis2;
            graph2.valueField = "conn_den";
            graph2.fillAlphas = 0.5;
            chart1.addGraph(graph2);

            var chartCursor = new AmCharts.ChartCursor();
            chartCursor.zoomable = false;
            chart1.addChartCursor(chartCursor);

            chart1.write("chartdiv1");
        });
    </script>

<script>
    AmCharts.ready(function () {

        // LINE CHART
        var chart1 = new AmCharts.AmSerialChart();
        chart1.pathToImages = "http://www.amcharts.com/lib/images";

        chart1.dataProvider = {{ connection_density_data['Life_of_Mahatma_Gandhi'] | safe }};
        chart1.marginRight = 0;
        chart1.categoryField = "date";

        var categoryAxis = chart1.categoryAxis;
        // categoryAxis.parseDates = true;
        categoryAxis.dashLength = 5;
        categoryAxis.equalSpacing = true;
        categoryAxis.startOnAxis = false;
        categoryAxis.axisAlpha = 0;
        categoryAxis.autoGridCount = false;
        categoryAxis.gridCount = 8;
        categoryAxis.showFirstLabel = true;

        var valueAxis1 = new AmCharts.ValueAxis();
        valueAxis1.axisAlpha = 0;
        valueAxis1.dashLength = 5;
        valueAxis1.inside = true;
        chart1.addValueAxis(valueAxis1);

        var valueAxis2 = new AmCharts.ValueAxis();
        valueAxis2.axisAlpha = 0;
        valueAxis2.dashLength = 5;
        valueAxis2.inside = true;
        valueAxis2.position = "right";
        chart1.addValueAxis(valueAxis2);

        var graph1 = new AmCharts.AmGraph();
        graph1.bullet = "round";
        graph1.bulletSize = 10;
        graph1.valueField = "nodes";
        chart1.addGraph(graph1);

        var graph2 = new AmCharts.AmGraph();
        graph2.type = "column";
        graph2.valueAxis = valueAxis2;
        graph2.valueField = "conn_den";
        graph2.fillAlphas = 0.5;
        chart1.addGraph(graph2);

        var chartCursor = new AmCharts.ChartCursor();
        chartCursor.zoomable = false;
        chart1.addChartCursor(chartCursor);

        chart1.write("chartdiv2");
    });
</script>

<script>
        AmCharts.ready(function () {

            // LINE CHART
            var chart1 = new AmCharts.AmSerialChart();
            chart1.pathToImages = "http://www.amcharts.com/lib/images";

            chart1.dataProvider = {{ cumulative_connection_density_data | safe }};
            chart1.marginRight = 0;
            chart1.categoryField = "date";

            var categoryAxis = chart1.categoryAxis;
            // categoryAxis.parseDates = true;
            categoryAxis.dashLength = 5;
            categoryAxis.equalSpacing = true;
            categoryAxis.startOnAxis = false;
            categoryAxis.axisAlpha = 0;
            categoryAxis.autoGridCount = false;
            categoryAxis.gridCount = 8;
            categoryAxis.showFirstLabel = true;

            var valueAxis1 = new AmCharts.ValueAxis();
            valueAxis1.axisAlpha = 0;
            valueAxis1.dashLength = 5;
            valueAxis1.inside = true;
            valueAxis1.title = "Connection Density";
            chart1.addValueAxis(valueAxis1);

            var graph1 = new AmCharts.AmGraph();
            graph1.type = "column";
            graph1.valueField = "Na_conn_den";
            graph1.fillAlphas = 0.9;
            chart1.addGraph(graph1);

            var graph2 = new AmCharts.AmGraph();
            graph2.type = "column";
            graph2.valueField = "Nb_conn_den";
            graph2.fillAlphas = 0.9;
            chart1.addGraph(graph2);

            var chartCursor = new AmCharts.ChartCursor();
            chartCursor.zoomable = false;
            chart1.addChartCursor(chartCursor);
            console.log(chart1)

            chart1.write("chartdiv3");
        });
    </script>

</body>



</html>